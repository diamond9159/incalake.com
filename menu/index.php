<!DOCTYPE&nbsp;html>
<!--[if lt IE 7 ]> <html lang="en" class="ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US"> <!--<![endif]-->


<!-- BEGIN HEAD -->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Menu en ingles</title>

    <meta content="" name="Lightweight and pure CSS MegaNavbar component, that uses the standard navbar markup, and the fluid grid system classes from Bootstrap 3. Work for fixed and responsive layout, and has the facility to include any Bootstrap component except dropdown. MegaNavbar is compatible with mobile devices and modern web browsers." />
    <meta content="" name="MegaNavbar.com" />

    <!-- Bootstrap -->
<link rel="stylesheet" href="http://localhost/web/assets/resources/bootstrap4/css/bootstrap.min.css">    <!--or for Bootstrap local/server version: <link href="MegaNavbar/assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet"> -->

    <!-- Font Awesome -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"> <!--for Font Awesome CDN version-->
    <!--or for Font Awesome local/server version: <link href="MegaNavbar/assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet"> -->

    <!-- BEGIN GLOBAL MANDATORY STYLES -->

    <link rel="shortcut icon" href="./favicon.ico" />

    <!-- jQuery JavaScript CDN version (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!--or for jQuery JavaScript local/server version: <script src="MegaNavbar/assets/plugins/jquery-1.11.1.min.js"></script>  -->

    <!-- Latest compiled and minified Bootstrap JavaScript CDN version -->
    <!--script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script-->
    <script src="http://localhost/web/assets/resources/bootstrap4/js/bootstrap.min.js"></script>

    <!--or for Bootstrap JavaScript local/server version: <script src="MegaNavbar/assets/plugins/bootstrap/js/bootstrap.min.js"></script>  -->
    <style>
        .marginBottom-0 {margin-bottom:0;}

.dropdown-submenu{position:relative;}
.dropdown-submenu>.dropdown-menu{top:0;left:100%;margin-top:-6px;margin-left:-1px;-webkit-border-radius:0 6px 6px 6px;-moz-border-radius:0 6px 6px 6px;border-radius:0 6px 6px 6px;}
.dropdown-submenu>a:after{display:block;content:" ";float:right;width:0;height:0;border-color:transparent;border-style:solid;border-width:5px 0 5px 5px;border-left-color:#cccccc;margin-top:5px;margin-right:-10px;}
.dropdown-submenu:hover>a:after{border-left-color:#555;}
.dropdown-submenu.pull-left{float:none;}.dropdown-submenu.pull-left>.dropdown-menu{left:-100%;margin-left:10px;-webkit-border-radius:6px 0 6px 6px;-moz-border-radius:6px 0 6px 6px;border-radius:6px 0 6px 6px;}



.dropdown-submenu:hover>.dropdown-menu {
    display: block;
}
.navbar-nav > li:nth-last-child(1){
    background: #CD3636;
}
.navbar-nav > li:nth-last-child(2){
    background: #41A172;
}
    
/* navbar */
.navbar-custom {
    background-color: #1e6496;
    border-color: #325D89;
    border-radius:none !important;
}
/* Title */
.navbar-custom .navbar-brand {
    color: white;
}
.navbar-custom .navbar-brand:hover,
.navbar-custom .navbar-brand:focus {
    color: red;
}
/* Link */
.navbar-custom .navbar-nav > li > a {
    color: white;
}
.navbar-custom .navbar-nav > li > a:hover,
.navbar-custom .navbar-nav > li > a:focus {
    color: white;
    background: #1569A5;
}
.navbar-custom .navbar-nav > .active > a,
.navbar-custom .navbar-nav > .active > a:hover,
.navbar-custom .navbar-nav > .active > a:focus {
    background-color: red;
}
.navbar-custom .navbar-nav > .open > a,
.navbar-custom .navbar-nav > .open > a:hover,
.navbar-custom .navbar-nav > .open > a:focus {
    background-color: #336F99;
}
/* Caret */
.navbar-custom .navbar-nav > .dropdown > a .caret {
    border-top-color: #5085A9;
    border-bottom-color: #5085A9;
}
.navbar-custom .navbar-nav > .dropdown > a:hover .caret,
.navbar-custom .navbar-nav > .dropdown > a:focus .caret {
    border-top-color: #333;
    border-bottom-color: #333;
}
.navbar-custom .navbar-nav > .open > a .caret,
.navbar-custom .navbar-nav > .open > a:hover .caret,
.navbar-custom .navbar-nav > .open > a:focus .caret {
    border-top-color: #5085A9;
    border-bottom-color: #5085A9;
}
/* Mobile version */
.navbar-custom .navbar-toggle {
    border-color: red;
    color:white;
}
.navbar-custom  a.dropdown-toggle{
    color:white;
}
.navbar-custom .navbar-toggle:hover,
.navbar-custom .navbar-toggle:focus {
    background-color: red;
}
.navbar-custom .navbar-toggle .icon-bar {
    background-color: ;
}
@media (max-width: 767px) {
    .navbar-custom .navbar-nav .open .dropdown-menu > li > a {
        color: ;
    }
    .navbar-custom .navbar-nav .open .dropdown-menu > li > a:hover,
    .navbar-custom .navbar-nav .open .dropdown-menu > li > a:focus {
          color: ;
    }
}
.navbar-custom .dropdown-menu{
    background:#2979B2;
}


    </style>
<link href='http://localhost/smartmenu/css/sm-core-css.css' rel='stylesheet' type='text/css' />
<link href='http://localhost/smartmenu/css/sm-blue/sm-blue-2.css' rel='stylesheet' type='text/css' />
<link href='http://localhost/smartmenu/css/sm-clean/sm-clean.css' rel='stylesheet' type='text/css' />
<script src="http://localhost/smartmenu/jquery.smartmenus.min.js"></script>
</head>


<body >
    

    <div class="container">
    
      <?php
/*$con=mysqli_connect("localhost","root","","cms_incalake");
// Check connection
if (mysqli_connect_errno())
{
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
 
// Perform queries 
 
function get_menu_tree($parent_id=0) 
{
  global $con;
  $menu = "";
  $sqlquery = " SELECT * FROM menu where parent_id='" .$parent_id . "' ORDER BY menu_id ASC, prioridad ASC";
  $res=mysqli_query($con,$sqlquery);
    while($row=mysqli_fetch_array($res,MYSQLI_ASSOC)) 
  {
           $menu .="<li><a href='".$row['link']."'>".$row['menu_name']."</a>";
       
       $menu .= "<ul>".get_menu_tree($row['menu_id'])."</ul>"; //call  recursively
       
       $menu .= "</li>";
 
    }
    
    return $menu;
} */
$dir = "../assets/menu/";
$file = !empty($_GET['idioma'])?$dir.$_GET['idioma'].'.txt':$dir.'ES'.'.txt';
  $json = null;
  if(file_exists($file)){
        $myfile = fopen($file, "r");
      $json = @fread($myfile,filesize($file));
      fclose($myfile);
    }

//$hola = include('web/assets/menu/ES.txt');
  $json = json_decode($json,true);
  




      function get_menu_tree($parent_id=0) 

{ 
  global $json;
  //var_dump($json);
        //$colores = array('default','warning','success','info','primary','danger');
       //global $new_array_links;
        $menu = "";
      // var_dump($GLOBALS['MENU']);exit;
        //$sqlquery = " SELECT * FROM menu where status=1 and parent_id='" .$parent_id . "' ";
      

       if(is_array(@$json[$parent_id])){
         foreach($json[$parent_id] as $key => $value){
          //var_dump($json[$parent_id]);
          $cantidad = @count($json[$value['id']]);

         /* $menu .="<li class='nav-item ".($cantidad&&$parent_id?'dropdown-submenu':null)."'> 
                     <a target='_".($value['target']?'blank':'self')."' class='nav-link dropdown-toggle' ".($cantidad?"data-toggle='dropdown'":null)." href='".($value['url']?$value['url']:'#')."'>
                       <span class='".$value['icono']."'></span> "
                       .$value['nombre'].($cantidad?' <span class="badge">'.$cantidad.'</span>':null).
                    "</a>".
                    ($cantidad?"<ul class='dropdown-menu'>".get_menu_tree($value['id'])."</ul>":null)
                  ."</li>";*/
                  $menu .="<li> 
                     <a target='_".($value['target']?'blank':'self')."' href='".($value['url']?$value['url']:'#')."'>
                       <span class='".$value['icono']."'></span> "
                       .$value['nombre'].($cantidad?' <span class="badge">'.$cantidad.'</span>':null).
                    "</a>".
                    ($cantidad?"<ul>".get_menu_tree($value['id'])."</ul>":null)
                  ."</li>";
          
          }

        }
          
          return $menu;
      }
      //echo get_menu_tree();
?>
   <input id="main-menu-state" type="checkbox" />
    <label class="main-menu-btn" for="main-menu-state">
      <span class="main-menu-btn-icon"></span> Ver menu
    </label>
  <ul id="main-menu" class="sm sm-blue collapsed">
     <?=get_menu_tree();?>
  </ul>  

<script>
  $(function() {
  var $mainMenuState = $('#main-menu-state');
  if ($mainMenuState.length) {
    // animate mobile menu
    $mainMenuState.change(function(e) {
      var $menu = $('#main-menu');
      if (this.checked) {
        $menu.hide().slideDown(250, function() { $menu.css('display', ''); });
      } else {
        $menu.show().slideUp(250, function() { $menu.css('display', ''); });
      }
    });
    // hide mobile menu beforeunload
    $(window).on('beforeunload unload', function() {
      if ($mainMenuState[0].checked) {
        $mainMenuState[0].click();
      }
    });
  }
});
</script>
<style type="text/css">
  .main-menu-btn {
  position: relative;
  display: inline-block;
  width: 28px;
  height: 28px;
  text-indent: 28px;
  white-space: nowrap;
  overflow: hidden;
  cursor: pointer;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}
  /* hamburger icon */
  .main-menu-btn-icon, .main-menu-btn-icon:before, .main-menu-btn-icon:after {
    position: absolute;
    top: 50%;
    left: 2px;
    height: 2px;
    width: 24px;
    background: #bbb;
    -webkit-transition: all 0.25s;
    transition: all 0.25s;
  }
  .main-menu-btn-icon:before {
    content: '';
    top: -7px;
    left: 0;
  }
  .main-menu-btn-icon:after {
    content: '';
    top: 7px;
    left: 0;
  }
  /* x icon */
  #main-menu-state:checked ~ .main-menu-btn .main-menu-btn-icon {
    height: 0;
    background: transparent;
  }
  #main-menu-state:checked ~ .main-menu-btn .main-menu-btn-icon:before {
    top: 0;
    -webkit-transform: rotate(-45deg);
    transform: rotate(-45deg);
  }
  #main-menu-state:checked ~ .main-menu-btn .main-menu-btn-icon:after {
    top: 0;
    -webkit-transform: rotate(45deg);
    transform: rotate(45deg);
  }
  /* hide menu state checkbox (keep it visible to screen readers) */
  #main-menu-state {
    position: absolute;
    width: 1px;
    height: 1px;
    margin: -1px;
    border: 0;
    padding: 0;
    overflow: hidden;
    clip: rect(1px,1px,1px,1px);
  }
  /* hide the menu in mobile view */
  #main-menu-state:not(:checked) ~ #main-menu {
    display: none;
  }
  #main-menu-state:checked ~ #main-menu {
    display: block;
  }
  @media (min-width: 768px) {
    /* hide the button in desktop view */
    .main-menu-btn {
      position: absolute;
      top: -99999px;
    }
    /* always show the menu in desktop view */
    #main-menu-state:not(:checked) ~ #main-menu {
      display: block;
    }
  }
  /*added by froy*/
   #main-menu > li:nth-last-child(1){
    background: linear-gradient(to bottom,  #CB4B4B,   #CD3636);
    
    }
    #main-menu > li:nth-last-child(1) a:hover{
    background: linear-gradient(to bottom,  #C62828,   #CD3636) !important;
    
    }
    #main-menu > li:nth-last-child(2){
      background: linear-gradient(to bottom,  #5AAF86,   #41A172);
    }
    #main-menu > li:nth-last-child(2) a:hover{
      background: linear-gradient(to bottom,  #41A273,   #41A172) !important;
    }
</style>


    </div>

    
<script type="text/javascript">
$(function() {
  $('#main-menu').smartmenus();
});

  $(document).ready(function(){
    $('ul.dropdown-menu [data-toggle=dropdown]').on('click', function(event) {
      event.preventDefault(); 
      event.stopPropagation(); 
      $(this).parent().siblings().removeClass('open');
      $(this).parent().toggleClass('open');
    });
  });

</script>
    

</body>
</html>